---
import WhatsAppIcon from './WhatsAppIcon.astro';
// FAQ component - Preguntas Frecuentes
---

<section id="preguntas" class="py-20 bg-gradient-tertiary">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Title -->
    <div class="text-center mb-16">
      <h2 class="text-4xl font-bold text-white mb-4">Preguntas Frecuentes</h2>
      <p class="text-xl text-gray-300">Resolvemos tus dudas sobre créditos de libranza</p>
    </div>

    <!-- FAQ Items -->
    <div class="space-y-6">
      <!-- FAQ 1 -->
      <div class="bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 overflow-hidden">
        <button class="faq-button w-full px-6 py-4 text-left flex justify-between items-center hover:bg-white/5 transition-colors duration-300" data-target="faq-1" aria-label="Expandir pregunta: ¿Qué es un crédito de libranza?">
          <h3 class="text-lg font-semibold text-white">¿Qué es un crédito de libranza?</h3>
          <svg class="faq-icon w-5 h-5 text-green-400 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="faq-1" class="faq-content hidden px-6 pb-4">
          <p class="text-gray-300">Es un crédito que se descuenta directamente de tu nómina o pensión, ofreciendo tasas preferenciales y mayor facilidad de aprobación para pensionados, maestros y policías.</p>
        </div>
      </div>

      <!-- FAQ 2 -->
      <div class="bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 overflow-hidden">
        <button class="faq-button w-full px-6 py-4 text-left flex justify-between items-center hover:bg-white/5 transition-colors duration-300" data-target="faq-2" aria-label="Expandir pregunta: ¿Puedo acceder si estoy reportado en centrales de riesgo?">
          <h3 class="text-lg font-semibold text-white">¿Puedo acceder si estoy reportado en centrales de riesgo?</h3>
          <svg class="faq-icon w-5 h-5 text-green-400 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="faq-2" class="faq-content hidden px-6 pb-4">
          <p class="text-gray-300">Sí, una de las principales ventajas del crédito de libranza es que puedes acceder aún estando reportado en centrales de riesgo, ya que el descuento se hace directamente de tu nómina.</p>
        </div>
      </div>

      <!-- FAQ 3 -->
      <div class="bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 overflow-hidden">
        <button class="faq-button w-full px-6 py-4 text-left flex justify-between items-center hover:bg-white/5 transition-colors duration-300" data-target="faq-3">
          <h3 class="text-lg font-semibold text-white">¿Cuáles son los plazos disponibles?</h3>
          <svg class="faq-icon w-5 h-5 text-green-400 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="faq-3" class="faq-content hidden px-6 pb-4">
          <p class="text-gray-300">Ofrecemos plazos flexibles desde 12 hasta 144 meses, permitiéndote elegir la cuota que mejor se ajuste a tu capacidad de pago.</p>
        </div>
      </div>

      <!-- FAQ 4 -->
      <div class="bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 overflow-hidden">
        <button class="faq-button w-full px-6 py-4 text-left flex justify-between items-center hover:bg-white/5 transition-colors duration-300" data-target="faq-4">
          <h3 class="text-lg font-semibold text-white">¿Qué documentos necesito?</h3>
          <svg class="faq-icon w-5 h-5 text-green-400 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="faq-4" class="faq-content hidden px-6 pb-4">
          <p class="text-gray-300">Necesitas cédula de ciudadanía, certificado laboral o de pensión, últimos desprendibles de pago y autorización de descuento por nómina.</p>
        </div>
      </div>

      <!-- FAQ 5 -->
      <div class="bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 overflow-hidden">
        <button class="faq-button w-full px-6 py-4 text-left flex justify-between items-center hover:bg-white/5 transition-colors duration-300" data-target="faq-5">
          <h3 class="text-lg font-semibold text-white">¿Cuánto tiempo toma la aprobación?</h3>
          <svg class="faq-icon w-5 h-5 text-green-400 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div id="faq-5" class="faq-content hidden px-6 pb-4">
          <p class="text-gray-300">El proceso es 100% digital y la aprobación puede tomar entre 24 a 48 horas hábiles una vez tengas todos los documentos completos.</p>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div class="text-center mt-12">
      <p class="text-gray-300 mb-6">¿Tienes más preguntas? Contáctanos para asesoría personalizada</p>
      <a 
        href="https://wa.me/573505489828?text=Hola,%20tengo%20preguntas%20sobre%20créditos%20de%20libranza" 
        target="_blank" 
        rel="noopener noreferrer"
        class="inline-flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-200"
      >
        <WhatsAppIcon class="w-5 h-5" />
        <span>Consultar por WhatsApp</span>
      </a>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const faqButtons = document.querySelectorAll('.faq-button');
    
    faqButtons.forEach(button => {
      button.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        const content = document.getElementById(targetId);
        const icon = this.querySelector('.faq-icon');
        
        if (!targetId || !content || !icon) {
          console.warn('FAQ elements not found');
          return;
        }
        
        // Close all other FAQ items
        faqButtons.forEach(otherButton => {
          if (otherButton !== this) {
            const otherTargetId = otherButton.getAttribute('data-target');
            const otherContent = otherTargetId ? document.getElementById(otherTargetId) : null;
            const otherIcon = otherButton.querySelector('.faq-icon');
            
            if (otherContent) {
              otherContent.classList.add('hidden');
            }
            if (otherIcon) {
              otherIcon.classList.remove('rotate-180');
            }
          }
        });
        
        // Toggle current FAQ item
        content.classList.toggle('hidden');
        icon.classList.toggle('rotate-180');
      });
    });
  });
</script>